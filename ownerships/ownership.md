# 소유권(ownership)
> 일반적으로 프로그램은 작동하는 동안 컴퓨터의 메모리 사용 방법을 관리해야 한다.<br>
> 몇몇 언어들은 가비지 컬렉션으로 프로그램에서 더 이상 사용하지 않는 메모리를 정기적으로 찾거나, 프로그래머가 직접 명시적으로 메모리를 할당하고 해제하는 방식을 사용한다<br>
> Rust 는 위 두가지 방식이 아닌, 소유권이라는 시스템을 만들고 컴파일러가 컴파일 중에 검사할 여러 규칙을 정해 메모리를 관리하는 방식이다.<br>

## 스택 영역과 힙 영역
> 스택(stack)은 값이 들어온 순서대로 저장하고 역순으로 저장한다.(후입선출, LIFO) 그리고 스택에 데이터를 추가하는 행위를 푸시(PUSH), 스택에서 데이터를 제거하는 행위를 팝(POP)이라 한다.<br>
> 스택에 저장되는 데이터는 모두 명확하고 크기가 정해져 있어야 한다.<br>
> 컴파일 타임에 크기를 알 수 없거나, 크기가 변경될 수 있는 데이터는 스택 대신 힙에 저장되야 한다<br><br>
> 힙(heap)은 스택보다 복잡하다. 우리가 데이터를 힙에 넣을 때, 먼저 저장할 공간이 있는지 운영체제에 물어본다.<br>
> 메모리 할당자는 커다란 힙 영역 안에서 빈 지점을 찾고, 이 지점을 사용 중 이라고 표시한 뒤, 해당 지점을 가리키는 포인터(pointer)를 우리에게 반환한다.<br>
> 위 과정을 힙 공간 할당(allocating on the heap) 줄여서 할당(allocation)이라고 한다. 반면 스택에 값을 푸시하는 것은 할당이라 부르지 않는다.<br>
> 포인터는 크기가 정해져 있어, 스택에 저장할 수 있으나 포인터가 가리키는 실제 데이터를 사용할때는 포인터를 **참조**해, 해당 포인터가 가리키는 위치로 이동하는 과정을 거쳐야 한다.<br><br>
> 스택 영역은 데이터에 접근하는 방식상 힙 영역보다 속도가 빠르다. 메모리 할당자가 새 데이터를 저장할 공간을 찾을 필요 없이 항상 스택의 가장 윗 부분에 데이터를 저장하면 되기 때문이다.(데이터가 서로 붙어있다)<br>
> 반면, 힙에 공간을 할당하는 작업은 좀 더 많은 자원을 요구한다. 메모리 할당자가 데이터를 저장하기 위한 충분한 공간을 먼저 찾고, 다음 할당을 위한 준비를 위해 예약을 수행해야 되기 때문이다.<br><br>
> 힙 영역은 포인터가 가리키는 곳을 찾아가는 과정을 거치므로 느리다. 현대 프로세서는 메모리 내부에 왔다 갔다 하는 작업이 적을수록 속도가 빨라지는데 힙 영역에 있는 데이터들은 서로 떨어져 있어 프로세서가 돌아다녀야 하기 때문에 느리다.<br><br>
> 함수 호출시, 호출한 함수에 넘겨준 값(또는 힙 영역의 데이터를 가리키는 포인터)과 해당 함수의 지역 변수들이 스택에 푸시된다. 그리고 이 데이터들은 함수가 종료될 때 스택에서 팝된다.<br>
> 코드에서 힙의 어떤 데이터를 사용하는지 추적하고 힙에서 중복된느 데이터를 최소화하며, 쓰지 않는 데이터를 힙에서 정리해 메모리 영역을 확보하는 등 작업은 모두 소유권과 관련되어 있다.
> 반대로 소유권을 한번 이해하면 스택, 힙 영역으로 고민할 일이 줄어들 것 이다.<br>
> 소유권의 주 목표는 힙 데이터의 관리이다.

## 소유권 규칙
> Rust 에서 각각의 값은 소유자(owner)가 정해져 있다.
> 한 값의 소유자는 동시에 여러개로 존재할 수 없다.(하나의 데이터는 오직 한 변수만이 그 메모리를 책임질 수 있다.)
> 소유자가 스코프 밖으로 벗어날 때, 값은 버려진다.(dropped)
